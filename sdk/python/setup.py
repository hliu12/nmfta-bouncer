from setuptools import setup, find_packages

# Try to convert markdown README to rst format for PyPI.
try:
    import pypandoc
    long_description = pypandoc.convert('README.md', 'rst')
except(IOError, ImportError):
    long_description = open('README.md').read()

setup(
    name='bouncerapi',
    version='1.1.0rc0',
    description='![Bouncer Logo](https://raw.githubusercontent.com/nmfta-repo/nmfta-bouncer/master/project-bouncer-small.png)  The API for the bouncer firewall appliance, automating blacklisting via `ufw`. See https://github.com/nmfta-repo/nmfta-bouncer for the server code.  The version documented here is API version `1.1`. All endpoints below have a `/v1.1/` leading path element.  ## Authentication  This API uses Custom HTTP Header Bearer-token authentication. The following headers are required to be sent with each request  ```http Authorization: Bearer {access token from /login} ```  ## Working with Date and Time  Dates and times in the API are treated as opaque data types at present. Any date-time format can be used as long as the code consuming it is consistent with the code populating it.  We recommend all times in UTC, formatted using ISO 8601 string (format `yyyy-MM-ddTHH:mm:ss.fffZ`).  ## Error Codes  Errors in this API are returned in JSON objects with error code references in an `Error` field. If an endpoint returns a status code other than `200` then it will return a JSON error object indicating the error in `Error` field. No descriptions of the error will be provided, client code or developers need to consult the table here to understand the value in the `Error` field.  | Endpoint                                   | Error Code | Description                                                                           | |:-------------------------------------------|:----------:|:--------------------------------------------------------------------------------------| | `/register`                                | 1001       | User Name is required                                                                 | |                                            | 1002       | Password is required                                                                  | |                                            | 1003       | Duplicate User Name / User already exists                                             | |                                            | 1004       | User name too long                                                                    | |                                            | 1005       | Invalid Password                                                                      | | `/login`                                   | 2000       | Missing User Name                                                                     | |                                            | 2001       | Missing Password                                                                      | |                                            | 2002       | Missing Grant type                                                                    | |                                            | 2003       | Invalid User or password is not valid                                                 | | `/whitelists/IPAddresses/create`           | 3000       | IPv4 or IPv6 is required                                                              | |                                            | 3001       | IP Address is invalid                                                                 | |                                            | 3002       | Start Date is required                                                                | |                                            | 3003       | Start Date is invalid                                                                 | |                                            | 3004       | End Date is required                                                                  | |                                            | 3005       | End Date is invalid                                                                   | |                                            | 3006       | End Date needs to be greater than Start Date                                          | |                                            | 3007       | Comments too long (restrict to 3000 characters or less)                               | |                                            | 3008       | IP Address already whitelisted                                                        | |                                            | 3009       | IP Address currently blacklisted, remove it from blacklist before adding to whitelist | | `/blacklists/IPAddresses/create`           | 4000       | IPv4 or IPv6 is required                                                              | |                                            | 4001       | IP Address is invalid                                                                 | |                                            | 4002       | Start Date is required                                                                | |                                            | 4003       | Start Date is invalid                                                                 | |                                            | 4004       | End Date is required                                                                  | |                                            | 4005       | End Date is invalid                                                                   | |                                            | 4006       | End Date needs to be greater than Start Date                                          | |                                            | 4007       | Comments too long (restrict to 3000 characters or less)                               | |                                            | 4008       | IP Address already blacklisted                                                        | |                                            | 4009       | IP Address currently whitelisted, remove it from whitelist before adding to blacklist | |`/whitelists/ipaddresses/{entry_ id}/delete`| 5000       | Entry Id is required and should be an integer                                         | |                                            | 5001       | Entry Id not found                                                                    | | `/blacklists/ipaddresses/{entry_id}/delete`| 6000       | Entry Id is required and should be an integer                                         | |                                            | 6001       | Entry Id not found                                                                    |',
    long_description=long_description,
    author='Urban Jonson',
    author_email='urban.jonson@nmfta.org',
    url='https://github.com/nmfta-repo/nmfta-bouncer',
    packages=find_packages(),
    install_requires=[
        'requests>=2.9.1, <3.0',
        'jsonpickle>=0.7.1, <1.0',
        'cachecontrol>=0.11.7, <1.0',
        'python-dateutil>=2.5.3, <3.0'
    ],
    tests_require=[
        'nose>=1.3.7'
    ],
    test_suite = 'nose.collector'
)